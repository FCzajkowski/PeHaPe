<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabela Auta</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/normalize.css">
    <style>
        table { border-collapse: collapse; width: 80%; margin-top: 20px; text-align: center; font-size: 1rem; }
        table th, table td { padding: 10px; }
        table th { border-bottom: 2px solid #0F0F0F; }
        table td { border-bottom: 1px solid #ccc; }
        table tbody tr:last-child td { border-bottom: none; }
        table td:nth-child(5) button { padding: 3px 7px; background: none; border: none; border-bottom: 1px solid transparent; cursor: pointer; transition: 200ms; }
        table td:nth-child(5) button:nth-child(1):hover { border-bottom: 1px solid #791E94; }
        table td:nth-child(5) button:nth-child(2):hover { border-bottom: 1px solid #b41414; }
    </style>
</head>
<body>
    <h1>Tabela Auta</h1>

    <h2>Dodaj Auto</h2>
    <form method="POST" class="add">
        <input type="text" name="brand" placeholder="Marka" required>
        <input type="text" name="model" placeholder="Model" required>
        <input type="number" name="year" placeholder="Rok" required min="1886" max="2100">
        <button type="submit" name="add">Dodaj</button>
    </form>

    <form method="POST">
        <h2>UWAGA!</h2>
        <button type="submit" name="drop_all" onclick="return confirm('Jesteś pewien czy usunąć wszystkie rekordy?')">Usuń wszystkie rekordy</button>
    </form>

    <h2>Auta w Tabeli:</h2>
    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Marka</th>
                <th>Model</th>
                <th>Rok</th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody>
            {% for car in cars %}
                <tr>
                    <td>{{ car.id }}</td>
                    <td>{{ car.brand|e }}</td>
                    <td>{{ car.model|e }}</td>
                    <td>{{ car.year }}</td>
                    <td>
                        <form method="POST" style="display:inline;" >
                            <input type="hidden" name="id" value="{{ car.id }}">
                            <input type="text" name="brand" value="{{ car.brand|e }}" required>
                            <input type="text" name="model" value="{{ car.model|e }}" required>
                            <input type="number" name="year" value="{{ car.year }}" required>
                            <button type="submit" name="edit">Edytuj</button>
                        </form>
                        <form method="POST" style="display:inline;">
                            <input type="hidden" name="id" value="{{ car.id }}">
                            <button type="submit" name="delete" onclick="return confirm('UWAGA: Nieodwracalnie usuniesz samochód z bazy')">Usuń</button>
                        </form>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5">Brak rekordów</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>